generator client {
  provider               = "prisma-client"
  output                 = "./generated/prisma"
  engineType             = "client"
  moduleFormat           = "cjs"
  // it won't run both server and tests without this
  generatedFileExtension = "ts"
  importFileExtension    = ""
}

datasource db {
  provider = "postgresql"
}

model Listing {
  id              Int            @id @default(autoincrement())
  label           String
  addressLine1    String
  addressLine2    String?
  addressCity     String
  addressProvince String
  price           Int
  bathrooms       Int
  bedrooms        Int
  squareMeters    Int
  images          ListingImage[]
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
}

enum ImageStatus {
  PROCESSING
  COMPLETED
  FAILED
}

model ListingImage {
  id         Int         @id @default(autoincrement())
  storageKey String
  mimetype   String
  listing    Listing     @relation(fields: [listingId], references: [id])
  listingId  Int
  status     ImageStatus
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
}
